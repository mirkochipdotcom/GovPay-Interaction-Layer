# IAM Proxy / SATOSA configuration
# Base URL pubblico del proxy (visibile dal browser)
# Esempi:
# - DEV locale: https://127.0.0.1:9445
# - DEV con hostname: https://satosa-nginx.example.org:9445
# - PROD: https://login.comune.it
IAM_PROXY_PUBLIC_BASE_URL=https://127.0.0.1:9445

# Metadata SAML2 dell'IdP (SATOSA) usato dal frontoffice
# Se usi IAM Proxy interno (COMPOSE_PROFILES=iam-proxy):
# - Esterno (browser): https://satosa-nginx:9445/Saml2IDP/metadata
# - Interno (container): https://satosa-nginx:443/Saml2IDP/metadata
IAM_PROXY_SAML2_IDP_METADATA_URL=https://satosa-nginx:9445/Saml2IDP/metadata
IAM_PROXY_SAML2_IDP_METADATA_URL_INTERNAL=https://satosa-nginx:443/Saml2IDP/metadata

# Hostname e porta esposti dal reverse proxy SATOSA
# (CIE OIDC) Per test locali Ã¨ consigliato usare hostname dedicato
IAM_PROXY_HOSTNAME=127.0.0.1
IAM_PROXY_HTTPS_PORT=9445
IAM_PROXY_DEBUG=false

# SATOSA: Base URL pubbliche (override esplicito, se necessario)
SATOSA_BASE=https://127.0.0.1:9445
SATOSA_BASE_STATIC=https://127.0.0.1:9445/static
SATOSA_DISCO_SRV=https://127.0.0.1:9445/static/disco.html
# SATOSA: Security keys (CAMBIARE IN PRODUZIONE)
# Suggerimento: stringhe random >= 32 chars
SATOSA_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_STATE_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_USER_ID_HASH_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_UNKNOW_ERROR_REDIRECT_PAGE=https://127.0.0.1:9445
# SATOSA: Certificati per firma metadata SPID (path nel container SATOSA)
SATOSA_PRIVATE_KEY=./pki/privkey.pem
SATOSA_PUBLIC_KEY=./pki/cert.pem

# SATOSA: Organization & Contact Person (usati nei metadata SPID)
SATOSA_ORGANIZATION_DISPLAY_NAME_IT="Comune di Montesilvano"
SATOSA_ORGANIZATION_DISPLAY_NAME_EN="Municipality of Montesilvano"
SATOSA_ORGANIZATION_NAME_IT="Montesilvano"
SATOSA_ORGANIZATION_NAME_EN="Montesilvano"
SATOSA_ORGANIZATION_URL_IT=https://www.comune.montesilvano.pe.it
SATOSA_ORGANIZATION_URL_EN=https://www.comune.montesilvano.pe.it

# SATOSA: Responsible Contact Person (SPID Avviso 29v3)
SATOSA_CONTACT_PERSON_GIVEN_NAME="Support"
SATOSA_CONTACT_PERSON_EMAIL_ADDRESS="support@comune.montesilvano.pe.it"
SATOSA_CONTACT_PERSON_TELEPHONE_NUMBER="+39085XXXXXXX"
SATOSA_CONTACT_PERSON_FISCALCODE="XXXXXXXXXXX000W"
SATOSA_CONTACT_PERSON_IPA_CODE="c_f646"
SATOSA_CONTACT_PERSON_MUNICIPALITY="Montesilvano"

# SATOSA: UI Information (mostrato ai cittadini durante login)
SATOSA_UI_DISPLAY_NAME_IT="Accedi al Comune di Montesilvano"
SATOSA_UI_DISPLAY_NAME_EN="Login to Municipality of Montesilvano"
SATOSA_UI_DESCRIPTION_IT="Accedi tramite SPID per consultare e pagare le tue pendenze"
SATOSA_UI_DESCRIPTION_EN="Login via SPID to check and pay your debts"
SATOSA_UI_INFORMATION_URL_IT=https://www.comune.montesilvano.pe.it/help
SATOSA_UI_INFORMATION_URL_EN=https://www.comune.montesilvano.pe.it/help
SATOSA_UI_PRIVACY_URL_IT=https://www.comune.montesilvano.pe.it/privacy
SATOSA_UI_PRIVACY_URL_EN=https://www.comune.montesilvano.pe.it/privacy
SATOSA_UI_LEGAL_URL_IT=https://www.comune.montesilvano.pe.it/note-legali
SATOSA_UI_LEGAL_URL_EN=https://www.comune.montesilvano.pe.it/legal-notes
SATOSA_UI_LOGO_URL=https://www.comune.montesilvano.pe.it/logo.png
SATOSA_UI_LOGO_WIDTH=200
SATOSA_UI_LOGO_HEIGHT=60

# SATOSA: Metadata Fetching (IDP veri)
# DEV: true per SPID se vuoi usare registry ufficiale
SATOSA_GET_SPID_IDP_METADATA=true
SATOSA_GET_CIE_IDP_METADATA=false
SATOSA_GET_FICEP_IDP_METADATA=false
SATOSA_GET_IDEM_MDQ_KEY=true
# SATOSA: Demo SPID IdP Metadata
# Se true, scarica e usa demo.spid.gov.it (solo DEV)
SATOSA_USE_DEMO_SPID_IDP=true

# CIE OIDC (RICHIEDE CONFIG IN cieoidc_backend.yaml, non in .env)
# - providers (OIDC OP) e trust_anchor
# - authority_hints
# - jwks core/federation
# - redirect_uris / client_id / jwks_uri
# Vedi: iam-proxy-italia-project/conf/backends/cieoidc_backend.yaml

# SATOSA: UI Wallets Configuration (mostra/nasconde sezioni disco)
ENABLE_SPID=true
ENABLE_CIE=true
ENABLE_CIE_OIDC=false
ENABLE_IT_WALLET=false
ENABLE_IDEM=false
ENABLE_EIDAS=false

# MongoDB (usato da backend SATOSA)
MONGODB_USERNAME=satosa_user
MONGODB_PASSWORD=satosa_password
MONGODB_HOST=satosa-mongo
MONGODB_PORT=27017
MONGODB_DB=satosa

# MongoDB init (container mongo)
MONGO_INITDB_ROOT_USERNAME=satosa_user
MONGO_INITDB_ROOT_PASSWORD=satosa_password
MONGO_INITDB_DATABASE=satosa

# SATOSA Backend Configuration
# Se true, rimuove backend non configurati (utile in DEV)
SATOSA_DISABLE_CIEOIDC_BACKEND=false
SATOSA_DISABLE_PYEUDIW_BACKEND=true
