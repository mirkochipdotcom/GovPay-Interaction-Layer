<VirtualHost *:443>
    ServerName ${APACHE_SERVER_NAME}

    DocumentRoot /var/www/html

    SSLEngine on
    SSLCertificateFile /ssl/server.crt
    SSLCertificateKeyFile /ssl/server.key

    # ----------------------------------------------------------------------
    # BLOCCO DI SICUREZZA: Impedisci l'accesso diretto a cartelle sensibili
    # ----------------------------------------------------------------------

    # Nega l'accesso alla cartella delle dipendenze Composer
    <Directory /var/www/html/vendor>
        Require all denied
    </Directory>

    # ----------------------------------------------------------------------
    # Fine Blocchi di Sicurezza
    # ----------------------------------------------------------------------

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName ${APACHE_SERVER_NAME}
    Redirect permanent / https://${APACHE_SERVER_NAME}/
</VirtualHost>
