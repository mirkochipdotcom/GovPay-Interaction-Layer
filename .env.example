# Apache
APACHE_SERVER_NAME=localhost

# Porte HTTPS esposte dai container (host)
BACKOFFICE_HTTPS_PORT=8443
FRONTOFFICE_HTTPS_PORT=8444

# Docker Compose - profili di autenticazione SPID/CIE
# Opzioni:
# - 'iam-proxy': Avvia IAM Proxy (SATOSA) internamente per SPID/CIE
# - 'external': Non avvia proxy (usa uno esterno), configura endpoint e parametri di collegamento
# - 'none': Disabilita completamente SPID/CIE (nessun tasto login)
COMPOSE_PROFILES=iam-proxy

# Frontoffice - tipo di proxy di autenticazione
# Opzioni:
# - 'iam-proxy-saml2': Usa SATOSA SAML2 (interno, se COMPOSE_PROFILES=iam-proxy)
# - 'php-proxy': Usa SimpleSAMLphp/proxy esterno (se COMPOSE_PROFILES=external)
FRONTOFFICE_AUTH_PROXY_TYPE=iam-proxy-saml2

# Frontoffice - URL pubblico base (usato dal browser e per entity ID / ACS URL SAML)
# Esempi:
# - DEV locale: https://127.0.0.1:8444
# - PROD: https://portale.comune.it
FRONTOFFICE_PUBLIC_BASE_URL=https://127.0.0.1:8444

# Frontoffice - Metadata SP (freeze)
FRONTOFFICE_SAML_SP_METADATA_FREEZE=1
FRONTOFFICE_SAML_SP_METADATA_FILE=/var/www/html/metadata-sp/frontoffice_sp.xml

# Frontoffice - Certificati SP per firma metadata (obbligatori per validazione AgID)
# Inserire PEM completi o lasciare i path di default (lo script genera se mancanti).
FRONTOFFICE_SAML_SP_X509CERT=/var/www/html/metadata-sp/sp-signing.crt
FRONTOFFICE_SAML_SP_PRIVATEKEY=/var/www/html/metadata-sp/sp-signing.key

# IAM Proxy public URL (usato dal browser per il login SPID/CIE)
# Tutti gli altri URL del proxy IAM sono derivati automaticamente da questa variabile.
# Esempi:
# - DEV locale: https://localhost:9445
# - DEV con hostname: https://satosa.local:9445
# - PROD: https://login.comune.it (senza porta se è standard 443)
IAM_PROXY_PUBLIC_BASE_URL=https://localhost:9445

# IAM Proxy SAML2 IdP Metadata URL (INTERNAL) - usato internamente tra container
# Usa sempre la porta interna 443 e il nome del servizio docker (satosa-nginx)
# NON modificare a meno che non cambi il nome del servizio nel docker-compose.yml
IAM_PROXY_SAML2_IDP_METADATA_URL_INTERNAL=https://satosa-nginx:443/Saml2IDP/metadata

# IAM Proxy Italia (SATOSA) - Configurazione container
# Porta HTTPS esposta sull'host (cambia se 9445 è già in uso)
IAM_PROXY_HTTPS_PORT=9445
IAM_PROXY_DEBUG=false

# SATOSA: Security Keys (DEVE essere randomizzate in produzione!)
SATOSA_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_STATE_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_USER_ID_HASH_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
# SATOSA: Error Page Redirect (derivato automaticamente da IAM_PROXY_PUBLIC_BASE_URL)
# Lascia vuoto o commentato per usare il valore derivato
# SATOSA_UNKNOW_ERROR_REDIRECT_PAGE=${IAM_PROXY_PUBLIC_BASE_URL}

# SATOSA: Paths (dentro il container SATOSA)
SATOSA_PRIVATE_KEY=./pki/privkey.pem
SATOSA_PUBLIC_KEY=./pki/cert.pem

# SATOSA: Organization & Contact Person (usati nei metadata SPID)
SATOSA_ORGANIZATION_DISPLAY_NAME_IT="GovPay - Interazione Layer"
SATOSA_ORGANIZATION_DISPLAY_NAME_EN="GovPay - Interaction Layer"
SATOSA_ORGANIZATION_NAME_IT="GovPay"
SATOSA_ORGANIZATION_NAME_EN="GovPay"
SATOSA_ORGANIZATION_URL_IT=https://govpay.example.org
SATOSA_ORGANIZATION_URL_EN=https://govpay.example.org

# SATOSA: Responsible Contact Person (SPID Avviso 29v3)
SATOSA_CONTACT_PERSON_GIVEN_NAME="Support"
SATOSA_CONTACT_PERSON_EMAIL_ADDRESS="support@example.org"
SATOSA_CONTACT_PERSON_TELEPHONE_NUMBER="+39XXXXXXXXXX"
SATOSA_CONTACT_PERSON_FISCALCODE="XXXXXXXXXXX000W"
SATOSA_CONTACT_PERSON_IPA_CODE="c_x000"
SATOSA_CONTACT_PERSON_MUNICIPALITY="Municipality Name"

# SATOSA: UI Information (mostrato ai cittadini durante login)
SATOSA_UI_DISPLAY_NAME_IT="Sistema di Autenticazione SPID"
SATOSA_UI_DISPLAY_NAME_EN="SPID Authentication System"
SATOSA_UI_DESCRIPTION_IT="Accedi tramite SPID per gestire i tuoi pagamenti"
SATOSA_UI_DESCRIPTION_EN="Login via SPID to manage your payments"
SATOSA_UI_INFORMATION_URL_IT=https://govpay.example.org/help
SATOSA_UI_INFORMATION_URL_EN=https://govpay.example.org/help
SATOSA_UI_PRIVACY_URL_IT=https://govpay.example.org/privacy
SATOSA_UI_PRIVACY_URL_EN=https://govpay.example.org/privacy
SATOSA_UI_LOGO_URL=https://govpay.example.org/logo.png
SATOSA_UI_LOGO_WIDTH=200
SATOSA_UI_LOGO_HEIGHT=60

# SATOSA: Metadata Fetching (per autenticazione con IDP veri)
# Se true, il proxy IAM fetcha i metadata da fonti ufficiali all'avvio.
# Per DEV, lasciare false e usare metadata di test.
SATOSA_GET_SPID_IDP_METADATA=false
SATOSA_GET_CIE_IDP_METADATA=false
SATOSA_GET_FICEP_IDP_METADATA=false
SATOSA_GET_IDEM_MDQ_KEY=false

# SATOSA: IdP di test SPID (demo.spid.gov.it)
# Se true, abilita l'IdP di test AgID per sviluppo locale
# Richiede registrazione del Service Provider su https://demo.spid.gov.it
# Credenziali test: username=validator password=validator
SATOSA_USE_DEMO_SPID_IDP=true

# MongoDB (richiesto da SATOSA backends per storage sessioni)
# Se COMPOSE_PROFILES=iam-proxy, i container automaticamente creati sono:
# - satosa-mongo: MongoDB server interno
# Credenziali di default (CAMBIARLE IN PRODUZIONE)
MONGODB_USERNAME=satosa_user
MONGODB_PASSWORD=satosa_password
MONGODB_HOST=satosa-mongo
MONGODB_PORT=27017
MONGODB_DB=satosa

# SATOSA Backend Configuration
# Alcuni backend (cieoidc, pyeudiw) richiedono configurazioni esterne complesse
# Se true, disabilita il backend durante l'avvio rimuovendo il relativo file di config
# Utile in DEV dove non hai i trust anchors e le configurazioni complete
SATOSA_DISABLE_CIEOIDC_BACKEND=true
SATOSA_DISABLE_PYEUDIW_BACKEND=true

# Debug
# APP_DEBUG controlla la modalità di visualizzazione errori e diagnostica:
# 0/false: errori minimi, nessuna diagnostica, nessuna rotta /_diag attiva
# 1/true: errori dettagliati, diagnostica abilitata, rotte di test e debug disponibili
APP_DEBUG=0
# ENABLE_DEBUG_TOOL controlla la disponibilità delle utility di debug lato applicazione (es: tool di test, rotte /debug):
# 0/false: tool di debug disabilitati, anche se la directory debug è montata
# 1/true: tool di debug abilitati (ma attenzione: i file statici in debug/ sono sempre accessibili se il volume è montato)
ENABLE_DEBUG_TOOL=0

# Database
DB_ROOT_PASSWORD=changeme
DB_NAME=govpay
DB_USER=govpay
DB_PASSWORD=changeme
# Credenziali dedicate al frontend cittadini (stesso DB fisico, privilegi separati)
DB_NAME_CITTADINI=govpay
DB_USER_CITTADINI=govpay_cittadini
DB_PASSWORD_CITTADINI=changeme_cittadini

# Configurazione Generale
APP_ENTITY_NAME="Comune di Esempio"
APP_ENTITY_SUFFIX="Provincia di Esempio"
APP_ENTITY_GOVERNMENT="Regione Esempio"
APP_ENTITY_URL="https://www.comune.esempio.rm.it"
APP_SUPPORT_EMAIL="support@comune.esempio.rm.it"
#PARTITA IVA
ID_DOMINIO="66280920373"
# Identificativo applicazione A2A
ID_A2A="YOUR_A2A_ID_HERE"

# URL del Comune (usato per link e riferimenti)
URL_ENTE="https://www.comune.esempio.rm.it"

# pagoPA Checkout (EC API)
# Base URL API (esempi):
# - DEV:  https://api.dev.platform.pagopa.it/checkout/ec/v1
# - PROD: https://api.platform.pagopa.it/checkout/ec/v1
PAGOPA_CHECKOUT_EC_BASE_URL="https://api.dev.platform.pagopa.it/checkout/ec/v1"
# Subscription key (NON deve mai essere esposta al browser)
PAGOPA_CHECKOUT_SUBSCRIPTION_KEY=""
# Nome ente mostrato nel Checkout
PAGOPA_CHECKOUT_COMPANY_NAME=""
# Return URLs (opzionali): se vuote, il frontoffice usa pagine dedicate /checkout/(ok|cancel|error)
PAGOPA_CHECKOUT_RETURN_OK_URL=""
PAGOPA_CHECKOUT_RETURN_CANCEL_URL=""
PAGOPA_CHECKOUT_RETURN_ERROR_URL=""

# Configurazione API GovPay (Base URL dei servizi)
GOVPAY_PENDENZE_URL="https://api.instanza.govpay.it/GovPay-Pendenze/v2"
GOVPAY_PAGAMENTI_URL="https://api.instanza.govpay.it/GovPay-Pagamenti/v3"
GOVPAY_RAGIONERIA_URL="https://api.instanza.govpay.it/GovPay-Ragioneria/v2"
GOVPAY_BACKOFFICE_URL="https://api.instanza.govpay.it/GovPay-Backoffice/v1"
GOVPAY_PENDENZE_PATCH_URL="https://api.instanza.govpay.it/GovPay-Pendenze/v2"

# Autenticazione GOVPAY [basic,form,ssl, sslheader]
AUTHENTICATION_GOVPAY=sslheader

#NECESSARIO PER basic
#GOVPAY_USER=user
#GOVPAY_PASSWORD=password

#NECESSARI PER sslheader
GOVPAY_TLS_CERT=/var/www/certificate/certificate.cer
GOVPAY_TLS_KEY=/var/www/certificate/private_key.key

# Amministratore di default (seed). Modificare per l'ambiente locale.
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme

#TASSONOMIA PAGOPA UFFICIALI
TASSONOMIE_PAGOPA="https://static-contents.developer.pagopa.it/devportal-docs/docs/lBilmEcN90PbMrjKX1ww/.gitbook/assets/tassonomia.json"