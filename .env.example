# Apache
APACHE_SERVER_NAME=localhost
SSL=on

# Porte esposte dai container (host) - il protocollo (HTTP/HTTPS) dipende dalla variabile SSL
BACKOFFICE_HTTP_PORT=8443
FRONTOFFICE_HTTP_PORT=8444

# Docker Compose - profili di autenticazione SPID/CIE
# Opzioni:
# - 'iam-proxy': Avvia IAM Proxy (SATOSA) internamente per SPID/CIE
# - 'external': Non avvia proxy (usa uno esterno), configura endpoint e parametri di collegamento
# - 'none': Disabilita completamente SPID/CIE (nessun tasto login)
COMPOSE_PROFILES=iam-proxy


# Frontoffice - tipo di proxy di autenticazione
# Opzioni:
# - 'iam-proxy-saml2': Usa SATOSA SAML2 (interno, se COMPOSE_PROFILES=iam-proxy)
# - 'php-proxy': Usa SimpleSAMLphp/proxy esterno (se COMPOSE_PROFILES=external)
FRONTOFFICE_AUTH_PROXY_TYPE=iam-proxy-saml2

# Frontoffice - URL pubblico base (usato dal browser e per entity ID / ACS URL SAML)
# Esempi:
# - DEV locale: https://127.0.0.1:8444
# - PROD: https://portale.comune.it
FRONTOFFICE_PUBLIC_BASE_URL=https://127.0.0.1:8444
BACKOFFICE_PUBLIC_BASE_URL=https://127.0.0.1:8443/backoffice

# Frontoffice - Metadata SP (freeze)
FRONTOFFICE_SAML_SP_METADATA_FREEZE=1
FRONTOFFICE_SAML_SP_METADATA_FILE=/var/www/html/metadata-sp/frontoffice_sp.xml

# Frontoffice - Certificati SP per firma metadata (obbligatori per validazione AgID)
# Usa SOLO certificati SPID-compliant generati dal tool ufficiale (init-spid-cert).
FRONTOFFICE_SAML_SP_X509CERT=/var/www/html/spid-certs/sp-signing.crt
FRONTOFFICE_SAML_SP_PRIVATEKEY=/var/www/html/spid-certs/sp-signing.key

# Codice IPA dell'ente (usato in vari contesti)
APP_ENTITY_IPA_CODE="c_x000"

# Generazione certificati SPID-compliant (spid-compliant-certificates)
SPID_CERT_KEY_SIZE=3072
SPID_CERT_COMMON_NAME="Comune di Esempio"
SPID_CERT_DAYS=365
SPID_CERT_ENTITY_ID="${FRONTOFFICE_PUBLIC_BASE_URL}/saml/sp"
SPID_CERT_LOCALITY_NAME="Roma"
SPID_CERT_ORG_ID="PA:IT-${APP_ENTITY_IPA_CODE}"
SPID_CERT_ORG_NAME="Comune di Esempio"
SPID_CERT_SECTOR=public

# IAM Proxy / SATOSA
# Unico file separato: .env.iam-proxy
# (usa .env.iam-proxy.example come base e rinominalo in .env.iam-proxy)

# Debug
# APP_DEBUG controlla la modalità di visualizzazione errori e diagnostica:
# 0/false: errori minimi, nessuna diagnostica, nessuna rotta /_diag attiva
# 1/true: errori dettagliati, diagnostica abilitata, rotte di test e debug disponibili
APP_DEBUG=1
# ENABLE_DEBUG_TOOL controlla la disponibilità delle utility di debug lato applicazione (es: tool di test, rotte /debug):
# 0/false: tool di debug disabilitati, anche se la directory debug è montata
# 1/true: tool di debug abilitati (ma attenzione: i file statici in debug/ sono sempre accessibili se il volume è montato)
ENABLE_DEBUG_TOOL=1

# Database
DB_ROOT_PASSWORD=changeme
DB_NAME=govpay
DB_USER=govpay
DB_PASSWORD=changeme
# Credenziali dedicate al frontend cittadini (stesso DB fisico, privilegi separati)
DB_NAME_CITTADINI=govpay
DB_USER_CITTADINI=govpay_cittadini
DB_PASSWORD_CITTADINI=changeme_cittadini

# Configurazione Generale
APP_ENTITY_NAME="Comune di Esempio"
APP_ENTITY_SUFFIX="Provincia di Esempio"
APP_ENTITY_GOVERNMENT="Regione Esempio"
APP_ENTITY_URL="https://www.comune.esempio.rm.it"
APP_SUPPORT_EMAIL="support@comune.esempio.rm.it"
APP_SUPPORT_PHONE="800.000.000"
APP_SUPPORT_HOURS="Lun-Ven 9:00-18:00"
APP_SUPPORT_LOCATION="Via Roma 1, 00100 Roma (RM) Martedì e Giovedì 9:00-12:30 / 15:00-17:00"
APP_LOGO_SRC="/img/stemma_ente.png"
APP_LOGO_TYPE="img"
#PARTITA IVA
ID_DOMINIO="66280920373"
# Identificativo applicazione A2A
ID_A2A="YOUR_A2A_ID_HERE"

# URL del Comune (usato per link e riferimenti)
URL_ENTE="https://www.comune.esempio.rm.it"

# pagoPA Checkout (EC API)
# Base URL API (esempi):
# - DEV:  https://api.dev.platform.pagopa.it/checkout/ec/v1
# - PROD: https://api.platform.pagopa.it/checkout/ec/v1
PAGOPA_CHECKOUT_EC_BASE_URL="https://api.dev.platform.pagopa.it/checkout/ec/v1"
# Subscription key (NON deve mai essere esposta al browser)
PAGOPA_CHECKOUT_SUBSCRIPTION_KEY=""
# Nome ente mostrato nel Checkout
PAGOPA_CHECKOUT_COMPANY_NAME="${APP_ENTITY_NAME}"
# Return URLs (opzionali): se vuote, il frontoffice usa pagine dedicate /checkout/(ok|cancel|error)
PAGOPA_CHECKOUT_RETURN_OK_URL=""
PAGOPA_CHECKOUT_RETURN_CANCEL_URL=""
PAGOPA_CHECKOUT_RETURN_ERROR_URL=""

# pagoPA Biz Events (Recupero Ricevute EC)
# Base URL API (esempi):
# - DEV:  https://api.dev.platform.pagopa.it/bizevents/service/v1
# - PROD: https://api.platform.pagopa.it/bizevents/service/v1
BIZ_EVENTS_HOST="https://api.platform.pagopa.it/bizevents/service/v1"
# Subscription key per BIZ Events (Recupero ricevute Ente Creditore)
BIZ_EVENTS_API_KEY=""

# Email (Symfony Mailer - DSN-based)
# Esempi DSN:
#   smtp://user:pass@smtp.host:587?encryption=tls   → SMTP con TLS
#   sendmail://default                               → sendmail locale
#   null://null                                      → disabilita invio (solo log)
#
# IMPORTANTE: I caratteri speciali in USERNAME e PASSWORD devono essere URL-encoded.
# Caratteri comuni da codificare:
#   @  →  %40
#   $  →  %24 (Obbligatorio per evitare problemi con variabili shell/docker)
#   !  →  %21
#   *  →  %2a
#   ^  →  %5e
#   +  →  %2b
#
# Esempio: se la password è "P@ss$1!" e lo username è "user@dominio.it":
# BACKOFFICE_MAILER_DSN=smtp://user%40dominio.it:P%40ss%241%21@host:port
BACKOFFICE_MAILER_DSN=null://null
BACKOFFICE_MAILER_FROM_ADDRESS=noreply@esempio.it
BACKOFFICE_MAILER_FROM_NAME="GIL Backoffice"

# Base URL for Payment Options API (e.g. UAT or PROD)
PAGOPA_PAYMENT_OPTIONS_URL="https://api.dev.platform.pagopa.it/"
# API Key (Subscription Key from API Portal)
PAGOPA_PAYMENT_OPTIONS_KEY=""

# Configurazione API GovPay (Base URL dei servizi)
GOVPAY_PENDENZE_URL="https://api.instanza.govpay.it/GovPay-Pendenze/v2"
GOVPAY_PAGAMENTI_URL="https://api.instanza.govpay.it/GovPay-Pagamenti/v3"
GOVPAY_RAGIONERIA_URL="https://api.instanza.govpay.it/GovPay-Ragioneria/v2"
GOVPAY_BACKOFFICE_URL="https://api.instanza.govpay.it/GovPay-Backoffice/v1"
GOVPAY_PENDENZE_PATCH_URL="https://api.instanza.govpay.it/GovPay-Pendenze/v2"

# Autenticazione GOVPAY [basic,form,ssl, sslheader]
AUTHENTICATION_GOVPAY=sslheader

#NECESSARIO PER basic
GOVPAY_USER=
GOVPAY_PASSWORD=

#NECESSARI PER sslheader
GOVPAY_TLS_CERT=/var/www/certificate/certificate.cer
GOVPAY_TLS_KEY=/var/www/certificate/private_key.key

# Amministratore di default (seed). Modificare per l'ambiente locale.
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme

#TASSONOMIA PAGOPA UFFICIALI
TASSONOMIE_PAGOPA="https://static-contents.developer.pagopa.it/devportal-docs/docs/lBilmEcN90PbMrjKX1ww/.gitbook/assets/tassonomia.json"