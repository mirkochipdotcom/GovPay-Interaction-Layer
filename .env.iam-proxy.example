# IAM Proxy / SATOSA configuration
# Base URL pubblico del proxy (visibile dal browser)
# Esempi:
# - DEV locale: https://127.0.0.1:9445
# - DEV con hostname: https://satosa-nginx.example.org:9445
# - PROD: https://login.comune.it
IAM_PROXY_PUBLIC_BASE_URL=https://127.0.0.1:9445

# Metadata SAML2 dell'IdP (SATOSA) usato dal frontoffice
# Se usi IAM Proxy interno (COMPOSE_PROFILES=iam-proxy):
# - Esterno (browser): https://satosa-nginx:9445/Saml2IDP/metadata
# - Interno (container): https://satosa-nginx:443/Saml2IDP/metadata
IAM_PROXY_SAML2_IDP_METADATA_URL=https://satosa-nginx:9445/Saml2IDP/metadata
IAM_PROXY_SAML2_IDP_METADATA_URL_INTERNAL=https://satosa-nginx:443/Saml2IDP/metadata

# Hostname e porta esposti dal reverse proxy SATOSA
# (CIE OIDC) Per test locali Ã¨ consigliato usare hostname dedicato
IAM_PROXY_HOSTNAME=satosa-nginx
IAM_PROXY_HTTPS_PORT=9445
IAM_PROXY_DEBUG=false

# SATOSA: Base URL pubbliche (override esplicito, se necessario)
SATOSA_BASE=https://127.0.0.1:9445
SATOSA_BASE_STATIC=https://127.0.0.1:9445/static
SATOSA_DISCO_SRV=https://127.0.0.1:9445/static/disco.html
# SATOSA: Security keys (CAMBIARE IN PRODUZIONE)
# Suggerimento: stringhe random >= 32 chars
SATOSA_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_STATE_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_ENCRYPTION_KEY=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_USER_ID_HASH_SALT=CHANGE_THIS_RANDOM_STRING_32_CHARS_LONG
SATOSA_UNKNOW_ERROR_REDIRECT_PAGE=https://127.0.0.1:9445
# SATOSA: Certificati per firma metadata SPID (path nel container SATOSA)
SATOSA_PRIVATE_KEY=./pki/privkey.pem
SATOSA_PUBLIC_KEY=./pki/cert.pem

# SATOSA: Organization & Contact Person (usati nei metadata SPID)
SATOSA_ORGANIZATION_DISPLAY_NAME_IT="GovPay - Interazione Layer"
SATOSA_ORGANIZATION_DISPLAY_NAME_EN="GovPay - Interaction Layer"
SATOSA_ORGANIZATION_NAME_IT="GovPay"
SATOSA_ORGANIZATION_NAME_EN="GovPay"
SATOSA_ORGANIZATION_URL_IT=https://govpay.example.org
SATOSA_ORGANIZATION_URL_EN=https://govpay.example.org

# SATOSA: Responsible Contact Person (SPID Avviso 29v3)
SATOSA_CONTACT_PERSON_GIVEN_NAME="Support"
SATOSA_CONTACT_PERSON_EMAIL_ADDRESS="support@example.org"
SATOSA_CONTACT_PERSON_TELEPHONE_NUMBER="+39XXXXXXXXXX"
SATOSA_CONTACT_PERSON_FISCALCODE="XXXXXXXXXXX000W"
SATOSA_CONTACT_PERSON_IPA_CODE="c_x000"
SATOSA_CONTACT_PERSON_MUNICIPALITY="Municipality Name"

# SATOSA: UI Information (mostrato ai cittadini durante login)
SATOSA_UI_DISPLAY_NAME_IT="Sistema di Autenticazione SPID"
SATOSA_UI_DISPLAY_NAME_EN="SPID Authentication System"
SATOSA_UI_DESCRIPTION_IT="Accedi tramite SPID per gestire i tuoi pagamenti"
SATOSA_UI_DESCRIPTION_EN="Login via SPID to manage your payments"
SATOSA_UI_INFORMATION_URL_IT=https://govpay.example.org/help
SATOSA_UI_INFORMATION_URL_EN=https://govpay.example.org/help
SATOSA_UI_PRIVACY_URL_IT=https://govpay.example.org/privacy
SATOSA_UI_PRIVACY_URL_EN=https://govpay.example.org/privacy
SATOSA_UI_LEGAL_URL_IT=https://govpay.example.org/note-legali
SATOSA_UI_LEGAL_URL_EN=https://govpay.example.org/legal-notes
SATOSA_UI_LOGO_URL=https://govpay.example.org/logo.png
SATOSA_UI_LOGO_WIDTH=200
SATOSA_UI_LOGO_HEIGHT=60

# SATOSA: Metadata Fetching (IDP veri)
# DEV: true per SPID se vuoi usare registry ufficiale
SATOSA_GET_SPID_IDP_METADATA=true
SATOSA_GET_CIE_IDP_METADATA=true
SATOSA_GET_FICEP_IDP_METADATA=false
SATOSA_GET_IDEM_MDQ_KEY=true
# SATOSA: Demo SPID IdP Metadata
# Se true, scarica e usa demo.spid.gov.it (solo DEV)
SATOSA_USE_DEMO_SPID_IDP=false

# CIE OIDC override (generato da iam-proxy/cieoidc_backend.override.yaml.template)
CIE_OIDC_PROVIDER_URL=http://cie-provider.example.org:8002/oidc/op/
CIE_OIDC_TRUST_ANCHOR_URL=http://trust-anchor.example.org:5002
CIE_OIDC_AUTHORITY_HINT_URL=http://trust-anchor.example.org:5002
CIE_OIDC_CLIENT_ID=https://satosa-nginx.example.org/CieOidcRp
CIE_OIDC_CLIENT_NAME="Name of an example organization"
CIE_OIDC_ORGANIZATION_NAME="Example RP"
CIE_OIDC_JWKS_URI=https://satosa-nginx.example.org/CieOidcRp/openid_relying_party/jwks.json
CIE_OIDC_SIGNED_JWKS_URI=https://satosa-nginx.example.org/CieOidcRp/openid_relying_party/jwks.jose
CIE_OIDC_REDIRECT_URI=https://satosa-nginx.example.org/CieOidcRp/oidc/callback
CIE_OIDC_FEDERATION_RESOLVE_ENDPOINT=https://satosa-nginx.example.org/CieOidcRp/resolve
CIE_OIDC_HOMEPAGE_URI=https://satosa-nginx.example.org/CieOidcRp
CIE_OIDC_POLICY_URI=https://satosa-nginx.example.org/CieOidcRp/en/website/legal-information
CIE_OIDC_LOGO_URI=https://satosa-nginx.example.org/static/cie/sample-cie-logo.png
CIE_OIDC_CONTACT_EMAIL=ops@rp.example.it

# SATOSA: UI Wallets Configuration (mostra/nasconde sezioni disco)
ENABLE_SPID=true
ENABLE_CIE=true
ENABLE_CIE_OIDC=false
ENABLE_IT_WALLET=false
ENABLE_IDEM=false
ENABLE_EIDAS=false

# MongoDB (usato da backend SATOSA)
MONGODB_USERNAME=satosa_user
MONGODB_PASSWORD=satosa_password
MONGODB_HOST=satosa-mongo
MONGODB_PORT=27017
MONGODB_DB=satosa

# SATOSA Backend Configuration
# Se true, rimuove backend non configurati (utile in DEV)
SATOSA_DISABLE_CIEOIDC_BACKEND=false
SATOSA_DISABLE_PYEUDIW_BACKEND=true

# CIE OIDC: configurazione via override (vedi variabili sopra)
