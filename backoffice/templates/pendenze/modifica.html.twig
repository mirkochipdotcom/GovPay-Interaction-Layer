{% extends 'base.html.twig' %}

{% block title %}Pendenze - Modifica{% endblock %}

{% block content %}
  {% if errors is defined and errors %}
    <div class="alert alert-danger" role="alert">
      <ul class="mb-0">
        {% for e in errors %}<li>{{ e }}</li>{% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if warnings is defined and warnings %}
    <div class="alert alert-warning" role="alert">
      <ul class="mb-0">
        {% for w in warnings %}<li>{{ w }}</li>{% endfor %}
      </ul>
    </div>
  {% endif %}

  <form method="post" action="/pendenze/aggiorna/{{ idPendenza }}" class="card border-0 shadow-sm mb-4">
    <input type="hidden" name="return_url" value="{{ return_url }}">
    {% if id_dominio is defined and id_dominio %}
      <input type="hidden" name="idDominio" value="{{ id_dominio }}">
    {% endif %}
    <div class="card-header bg-light border-bottom py-3">
      <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-lg-between gap-1">
        <h2 class="h5 mb-0">Modifica pendenza <span class="text-muted">{{ idPendenza }}</span></h2>
        <p class="mb-0 text-muted small">Aggiorna i campi della pendenza</p>
      </div>
    </div>
    <div class="card-body">
      <div class="mb-3">
        {% if not id_a2a %}
          <div class="alert alert-warning small mb-0">Variabile di ambiente <code>ID_A2A</code> non impostata.</div>
        {% endif %}
      </div>
      {% include 'pendenze/_form_pendenza.html.twig' with { old: old, tipologie_pendenze: tipologie_pendenze, default_anno: default_anno, is_edit: true } %}
      <div class="d-flex gap-2 mt-4">
        <button type="submit" class="btn btn-primary">Aggiorna pendenza</button>
        <a class="btn btn-outline-secondary" href="{{ return_url }}">Annulla</a>
        <button type="button" class="btn btn-link ms-auto" data-bs-toggle="collapse" data-bs-target="#apiExtra" aria-expanded="false">Mostra campi avanzati</button>
      </div>
    </div>
  </form>
{% endblock %}
  