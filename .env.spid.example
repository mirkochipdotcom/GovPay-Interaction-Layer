# SPID/CIE - variabili dedicate
# Copia questo file in .env.spid e personalizza:
#   cp .env.spid.example .env.spid
#
# Nota: il file .env.spid viene caricato come env_file SOLO nei servizi:
# - govpay-interaction-frontoffice
# - spid-proxy
#
# Le variabili di Docker Compose (porte, COMPOSE_PROFILES, ecc.) restano in .env.

# Frontoffice - URL pubblico (usato per comporre il callback SPID)
# Se lasci vuoto, il frontoffice prova a dedurlo da Host/HTTPS della richiesta.
FRONTOFFICE_PUBLIC_BASE_URL=https://localhost:8444
FRONTOFFICE_SPID_CALLBACK_PATH=/spid/callback

# (opzionale) Redirect URI esplicito per SPID.
# Se lo imposti, deve essere presente anche in SPID_PROXY_REDIRECT_URIS (match esatto).
FRONTOFFICE_SPID_REDIRECT_URI=

# SPID Proxy (interno o esterno)
# Base URL pubblico del proxy (usato per i link nei metadata e per i redirect HTTP->HTTPS).
# Esempi:
#  - https://login.my-domain.it/
SPID_PROXY_PUBLIC_BASE_URL=https://localhost:8445

# EntityID del Proxy SP (di default: ${SPID_PROXY_PUBLIC_BASE_URL}/spid-metadata.xml)
# Lascia vuoto per usare il default.
SPID_PROXY_ENTITY_ID=

# Configurazione client applicativo che usa il proxy (es. GovPay Frontoffice)
# redirect_uri: lista separata da virgola. Pu√≤ contenere path relativi (/callback) o URL assoluti.
SPID_PROXY_CLIENT_ID=govpay_client
# (opzionale) Se vuoi cifrare la response via proxy, imposta anche il secret del client.
SPID_PROXY_CLIENT_SECRET=
SPID_PROXY_REDIRECT_URIS=/proxy-sample.php

# SPID Proxy - Setup non interattivo (generazione vendor/config/metadata al primo avvio)
# Nota: se cambi questi valori dopo il primo avvio, per rigenerare tutto devi eliminare i file
# di setup sul volume (spid-proxy/data) o rifare la procedura di reinstall.
SPID_PROXY_SERVICE_NAME=myservice
SPID_PROXY_PRODUCTION=0

# Abilitazioni
SPID_PROXY_ADD_SPID=1
SPID_PROXY_ADD_CIE=0

# IdP preconfigurati (utile in dev)
SPID_PROXY_ADD_DEMO_IDP=1
SPID_PROXY_ADD_DEMO_VALIDATOR_IDP=1
SPID_PROXY_ADD_AGID_VALIDATOR_IDP=1
# (opzionale) URL metadata IdP locale test
SPID_PROXY_LOCAL_TEST_IDP_METADATA_URL=

# Attributi richiesti in metadata (lista separata da virgola)
SPID_PROXY_ATTRS=spidCode,name,familyName,fiscalNumber,email

# SimpleSAMLphp (admin/secretsalt)
SPID_PROXY_SIMPLESAMLPHP_ADMIN_PASSWORD=admin
# Se vuoto viene generato automaticamente al primo avvio
SPID_PROXY_SIMPLESAMLPHP_SECRETSALT=

# Dati organizzazione nel metadata/cert (default: derivano da APP_ENTITY_NAME / ID_DOMINIO / URL_ENTE)
SPID_PROXY_ORG_NAME=
SPID_PROXY_ORG_DISPLAY_NAME=
SPID_PROXY_ORG_URL=

# Organizzazione: PA o privato
# 1 = Pubblica Amministrazione, 0 = privato
SPID_PROXY_ORG_IS_PUBLIC_ADMIN=1

# Codici organizzazione (per PA: IPACode, per privati: VATNumber/FiscalCode)
# Se non valorizzati, fallback su ID_DOMINIO
SPID_PROXY_ORG_CODE_TYPE=
SPID_PROXY_ORG_CODE=
SPID_PROXY_ORG_IDENTIFIER=
SPID_PROXY_ORG_FISCAL_CODE=
SPID_PROXY_ORG_NACE2_CODE=84.11

# Localizzazione (valori richiesti dalla procedura di setup)
SPID_PROXY_ORG_COUNTRY=IT
SPID_PROXY_ORG_LOCALITY=Locality
SPID_PROXY_ORG_MUNICIPALITY=H501
SPID_PROXY_ORG_PROVINCE=RM

# Contatti (dev default). Per prod usa contatti reali.
SPID_PROXY_ORG_EMAIL=info@organization.org
SPID_PROXY_ORG_PHONE=+3912345678

# File di esempio (www/)
# Nota: in contesti "proxy" spesso non servono, ma puoi abilitarli se vuoi pagine demo.
SPID_PROXY_ADD_EXAMPLES=0
SPID_PROXY_ADD_PROXY_EXAMPLE=1

# Campi FPA (necessari solo se SPID_PROXY_ORG_IS_PUBLIC_ADMIN=0)
SPID_PROXY_FPA_ID_PAESE=IT
SPID_PROXY_FPA_ID_CODICE=
SPID_PROXY_FPA_DENOMINAZIONE=
SPID_PROXY_FPA_INDIRIZZO=
SPID_PROXY_FPA_NUMERO_CIVICO=
SPID_PROXY_FPA_CAP=
SPID_PROXY_FPA_COMUNE=
SPID_PROXY_FPA_PROVINCIA=RM
SPID_PROXY_FPA_NAZIONE=IT
SPID_PROXY_FPA_ORG_NAME=
SPID_PROXY_FPA_ORG_EMAIL=info@organization.org
SPID_PROXY_FPA_ORG_PHONE=+3912345678

# Proxy response
SPID_PROXY_SIGN_RESPONSE=1
SPID_PROXY_ENCRYPT_RESPONSE=0
SPID_PROXY_LEVEL=2
SPID_PROXY_ATCS_INDEX=0
SPID_PROXY_TOKEN_EXP_TIME=1200
SPID_PROXY_RESPONSE_ATTR_PREFIX=
